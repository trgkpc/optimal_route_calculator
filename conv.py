import numpy as np
import opt_calc

# ここにデータを書く
init_r =  [ 0.5 ,2.05 ,3.141592653589793]

krsz_to_kz2 = [
    [2.675690485658338, [1.5737490263219245, -0.7839645946782798, 0.06138472814837909], [2.8647837164774783, -1.0724125008504934, 0.13018844753063932]],
    [1.3669067918021878, [1.388528581398728, 0.24430481457290298, 0.12277119083818751], [-0.29066766477274425, 0.38934961043576755, -0.015585885164889863]],
    [0.8554509309247698, [-0.42769057582493253, 2.3796653804148375, 1.9053535252422183e-05], [0.28106057870577483, -1.5648336924298833, 1.3392411282774955e-05]],
]

krsz_to_kz3 = [
    [2.5663430227623825, [2.7805736298432424, -1.1180010278266395, -0.10273215763938712], [4.919210930116046, -1.536459155543523, -0.11430334525661108]],
    [1.9578681832777851, [-0.023283601486773116, 1.163336324845221, 0.09803947911330867], [-2.348238746594717, 1.6084880586800012, 0.08918902949947534]],
    [0.8591333122528396, [-3.7051019114739536, -0.07684905007121265, -0.14037928210773962], [-2.487733170101678, -0.6595651247976403, -0.17046306060911162]],
    [1.1999999999999, [-1.4826913082164301, 0.29156250631521263, 6.0216598284559163e-05], [1.7623138431941774, -0.3465177955349603, 2.7422127212838045e-05]],
]

vias_data = krsz_to_kz3
# ここまでのデータを書く

def c_vec(x):
    return "{" + ",".join([str(e) for e in x]) + "}"

def cc_vec(x,y):
    return "        {" + c_vec(x) + "," + c_vec(y) + "}"

def do(init_r, vias_data):
    S = np.diag([1.,1.,0.3])
    pS = np.diag([1.,1.,1/0.3])

    r_ = S@np.array(init_r)
    v_ = S@np.array([0,0,0],dtype=float)


    print("{{")
    for route in vias_data:
        r0_ = np.array(r_)
        v0_ = np.array(v_)

        t, px, pv = route
        px_ = pS@np.array(px)
        pv_ = pS@np.array(pv)

        r_,v_ = opt_calc.opt_route(t, px_, pv_, r_, v_)

        print("    {",t,",")
        print(cc_vec(r0_, v0_)+",")
        print(cc_vec(r_ , v_ )+",")
        print(cc_vec(px_, pv_)+"},")


    print("}};")

print("===== krsz to kz2 =====")
do(init_r, krsz_to_kz2)
print()

print("===== krsz to kz3 =====")
do(init_r, krsz_to_kz3)

